<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard de Arrecada√ß√£o - CBMGO</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="dashboard">
      <div class="header">
        <h1>
          Dashboard de Arrecada√ß√£o - Corpo de Bombeiros Militar do Estado de
          Goi√°s
        </h1>
        <p>Valores de arrecada√ß√£o no servi√ßo de vistoria (2022-2024)</p>
      </div>

      <!-- Cont√™iner das Abas (MODIFICADO) -->
      <div class="tab-container">
        <button
          class="tab-button active"
          onclick="openTab(event, 'visaoGeral')"
        >
          Vis√£o Geral
        </button>
        <button class="tab-button" onclick="openTab(event, 'detalhamentoOBM')">
          Detalhamento OBM
        </button>
        <!-- NOVA ABA -->
        <button class="tab-button" onclick="openTab(event, 'compararOBMs')">
          Comparar OBMs
        </button>
        <button class="tab-button" onclick="openTab(event, 'rankingsAnalises')">
          Rankings e An√°lises
        </button>
      </div>

      <!-- Conte√∫do da Aba Vis√£o Geral (MODIFICADO - Tabela removida) -->
      <div id="visaoGeral" class="tab-content active">
        <!-- Resumo da Arrecada√ß√£o por Ano -->
        <div class="summary-cards">
          <!-- Cards permanecem aqui -->
          <div class="card">
            <div class="card-title">Arrecada√ß√£o Total 2022</div>
            <div class="card-value" id="total2022">R$ 51.182.273,35</div>
            <div class="card-subtitle">Base de compara√ß√£o</div>
          </div>
          <div class="card">
            <div class="card-title">Arrecada√ß√£o Total 2023</div>
            <div class="card-value" id="total2023">R$ 32.495.850,18</div>
            <div class="card-subtitle growth-negative">
              -36,51% em rela√ß√£o a 2022
            </div>
          </div>
          <div class="card">
            <div class="card-title">Arrecada√ß√£o Total 2024</div>
            <div class="card-value" id="total2024">R$ 34.252.753,25</div>
            <div class="card-subtitle growth-positive">
              +5,41% em rela√ß√£o a 2023
            </div>
          </div>
        </div>

        <!-- Compara√ß√£o Entre Anos por Servi√ßo -->
        <div class="section">
          <!-- Gr√°ficos de barras por servi√ßo permanecem aqui -->
          <div class="section-title">Compara√ß√£o Entre Anos por Servi√ßo</div>
          <div class="chart-row">
            <div class="chart-container">
              <canvas id="projetosYearlyChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="vistoriasYearlyChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="credenciamentoYearlyChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Gr√°ficos de Pizza por Servi√ßo -->
        <div class="section">
          <!-- Gr√°ficos de pizza anuais permanecem aqui -->
          <div class="section-title">
            Distribui√ß√£o da Arrecada√ß√£o por Tipo de Servi√ßo
          </div>
          <div class="pie-container">
            <div class="pie-chart">
              <canvas id="pieChart2022"></canvas>
            </div>
            <div class="pie-chart">
              <canvas id="pieChart2023"></canvas>
            </div>
            <div class="pie-chart">
              <canvas id="pieChart2024"></canvas>
            </div>
          </div>
        </div>

        <!-- Gr√°ficos de Pizza para Distribui√ß√£o Goi√¢nia vs Interior por servi√ßo -->
        <div class="section">
          <!-- Gr√°ficos de pizza Gyn/Int permanecem aqui -->
          <div class="section-title">
            Distribui√ß√£o Goi√¢nia vs Interior por Tipo de Servi√ßo
          </div>
          <div class="pie-container">
            <div class="pie-chart">
              <canvas id="pieChartVistorias"></canvas>
            </div>
            <div class="pie-chart">
              <canvas id="pieChartProjetos"></canvas>
            </div>
            <div class="pie-chart">
              <canvas id="pieChartCredenciamento"></canvas>
            </div>
          </div>
        </div>

        <!-- Gr√°ficos de Compara√ß√£o -->
        <div class="section">
          <!-- Gr√°ficos de linha/barra Gyn/Int e Evolu√ß√£o permanecem aqui -->
          <div class="section-title">Comparativos de Arrecada√ß√£o</div>
          <div class="chart-row">
            <div class="chart-container">
              <canvas id="locationChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="yearlyComparisonChart"></canvas>
            </div>
          </div>
        </div>

        <!-- SE√á√ÉO DA TABELA FOI MOVIDA -->
      </div>
      <!-- Fim da Aba Vis√£o Geral -->

      <!-- Conte√∫do da Nova Aba Detalhamento OBM (NOVO) -->
      <div id="detalhamentoOBM" class="tab-content">
        <!-- Tabela Detalhada de OBMs com filtros de ano para compara√ß√£o -->
        <div class="section">
          <div class="section-title">Detalhamento por OBM</div>
          <div class="filter-section">
            <div class="filter-group">
              <label for="yearInitial">Ano Inicial:</label>
              <select id="yearInitial">
                <option value="2022">2022</option>
                <option value="2023">2023</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="yearFinal">Ano Final:</label>
              <select id="yearFinal">
                <option value="2023">2023</option>
                <option value="2024" selected>2024</option>
              </select>
            </div>
            <!-- O bot√£o de atualizar (se existisse) ou outros controles da tabela viriam aqui -->
          </div>
          <div class="table-container">
            <table id="detailedTable">
              <thead>
                <tr>
                  <th>OBM</th>
                  <th>2022 (R$)</th>
                  <th>2023 (R$)</th>
                  <th>2024 (R$)</th>
                  <th id="variationHeader">Varia√ß√£o 2022-2024</th>
                  <!-- O texto ser√° atualizado via JS -->
                </tr>
              </thead>
              <tbody>
                <!-- Preenchido via JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- Fim da Aba Detalhamento OBM -->

      <!-- Conte√∫do da Aba Comparar OBMs (Permanece o mesmo da resposta anterior) -->
      <div id="compararOBMs" class="tab-content">
        <div class="section">
          <div class="section-title">Comparativo de Arrecada√ß√£o entre OBMs</div>

          <div class="obm-comparison-controls">
            <label for="obmAddDropdown"
              ><strong>Adicionar OBM √† compara√ß√£o:</strong></label
            >
            <select id="obmAddDropdown">
              <option value="" disabled selected>
                Selecione para adicionar...
              </option>
              <!-- Op√ß√µes ser√£o adicionadas via JavaScript -->
            </select>
          </div>

          <div id="selectedOBMListContainer" style="display: none">
            <!-- Come√ßa escondido -->
            <p><strong>OBMs em compara√ß√£o:</strong></p>
            <div id="selectedOBMList">
              <!-- Lista de OBMs selecionadas ser√° exibida aqui -->
            </div>
          </div>

          <div class="obm-comparison-chart-container">
            <canvas id="obmComparisonChart"></canvas>
          </div>
          <p
            id="obmComparisonMessage"
            style="text-align: center; margin-top: 15px"
          >
            Selecione uma OBM no menu acima para come√ßar a comparar.
          </p>
        </div>
      </div>
      <!-- Fim da Aba Comparar OBMs -->

      <!-- Conte√∫do da Aba Rankings e An√°lises -->
      <div id="rankingsAnalises" class="tab-content">
        <!-- Se√ß√£o de Rankings de OBMs -->
        <div class="section">
          <div class="section-title">Rankings de OBMs</div>
          
          <!-- Controles de filtro para a se√ß√£o de rankings -->
          <div class="filter-section">
            <div class="filter-group">
              <label for="rankingType">Tipo de Ranking:</label>
              <select id="rankingType">
                <option value="arrecadacao">Arrecada√ß√£o Total</option>
                <option value="crescimentoPercentual">Crescimento Percentual</option>
                <option value="crescimentoNominal">Crescimento Nominal</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="rankingYearInitial">Ano Inicial:</label>
              <select id="rankingYearInitial">
                <option value="2022">2022</option>
                <option value="2023">2023</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="rankingYearFinal">Ano Final:</label>
              <select id="rankingYearFinal">
                <option value="2023">2023</option>
                <option value="2024" selected>2024</option>
              </select>
            </div>
          </div>
          
          <div class="rankings-container">
            <div class="chart-row rankings-charts-row">
              <div class="chart-container rankings-chart">
                <div class="sub-section-title">Top 10 OBMs</div>
                <canvas id="topOBMsChart"></canvas>
              </div>
              <div class="chart-container rankings-chart">
                <div class="sub-section-title">Bottom 10 OBMs</div>
                <canvas id="bottomOBMsChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Se√ß√£o de Contribui√ß√£o para o Total -->
        <div class="section">
          <div class="section-title">Contribui√ß√£o para o Total</div>
          
          <!-- Controles de filtro para a se√ß√£o de contribui√ß√£o -->
          <div class="filter-section contribution-filter">
            <div class="filter-group">
              <label for="contributionYear">Ano:</label>
              <select id="contributionYear">
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024" selected>2024</option>
              </select>
            </div>
          </div>
          
          <div class="contribuicao-container">
            <div class="chart-container contribution-chart-container">
              <canvas id="contributionChart"></canvas>
            </div>
            <div class="contribution-summary" id="contributionSummary">
              <!-- Resumo textual ser√° adicionado aqui via JavaScript -->
            </div>
          </div>
        </div>

        <!-- Se√ß√£o de Performance Relativa √† M√©dia -->
        <div class="section">
          <div class="section-title">Performance Relativa √† M√©dia</div>
          
          <!-- Controles de filtro para a se√ß√£o de performance relativa -->
          <div class="filter-section performance-filter">
            <div class="filter-group">
              <label for="performanceYear">Ano:</label>
              <select id="performanceYear">
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024" selected>2024</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="performanceView">Visualiza√ß√£o:</label>
              <select id="performanceView">
                <option value="top20">Top 20 OBMs</option>
                <option value="all">Todas as OBMs</option>
              </select>
            </div>
          </div>
          
          <div class="performance-container">
            <div class="performance-chart-container">
              <canvas id="performanceChart"></canvas>
            </div>
            <div class="performance-summary" id="performanceSummary">
              <!-- Resumo textual ser√° adicionado aqui via JavaScript -->
            </div>
          </div>
        </div>

        <!-- Se√ß√£o de An√°lise de Quadrantes -->
        <div class="section">
          <div class="section-title">An√°lise de Quadrantes</div>
          
          <!-- Explica√ß√£o do quadrante logo abaixo do t√≠tulo -->
          <div class="quadrantes-explicacao">
            <div class="explicacao-texto">
              <p>O gr√°fico de quadrantes posiciona cada OBM com base em sua arrecada√ß√£o absoluta (eixo X) e crescimento percentual (eixo Y), comparados com a m√©dia geral. As linhas divis√≥rias representam as m√©dias, criando quatro perfis estrat√©gicos:</p>
            </div>
            <div class="explicacao-quadrantes">
              <div class="explicacao-quadrante q1">
                <span class="numero-quadrante">Q1</span>
                <span class="nome-quadrante">Estrelas</span>
                <span class="desc-quadrante">Alta Arrecada√ß√£o / Alto Crescimento</span>
              </div>
              <div class="explicacao-quadrante q2">
                <span class="numero-quadrante">Q2</span>
                <span class="nome-quadrante">Emergentes</span>
                <span class="desc-quadrante">Baixa Arrecada√ß√£o / Alto Crescimento</span>
              </div>
              <div class="explicacao-quadrante q3">
                <span class="numero-quadrante">Q3</span>
                <span class="nome-quadrante">Aten√ß√£o</span>
                <span class="desc-quadrante">Baixa Arrecada√ß√£o / Baixo Crescimento</span>
              </div>
              <div class="explicacao-quadrante q4">
                <span class="numero-quadrante">Q4</span>
                <span class="nome-quadrante">Estabelecidas</span>
                <span class="desc-quadrante">Alta Arrecada√ß√£o / Baixo Crescimento</span>
              </div>
            </div>
          </div>
          
          <!-- Filtros para a an√°lise de quadrantes -->
          <div class="filter-section quadrantes-filter">
            <div class="filter-group">
              <div class="label-with-tooltip">
                <label for="quadranteAnoX">Ano (Arrecada√ß√£o Absoluta):</label>
                <div class="info-tooltip">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-text">Define o ano de refer√™ncia para o valor da arrecada√ß√£o absoluta, representado no eixo horizontal (X) do gr√°fico.</span>
                </div>
              </div>
              <select id="quadranteAnoX">
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024" selected>2024</option>
              </select>
            </div>
            <div class="filter-group">
              <div class="label-with-tooltip">
                <label for="quadrantePeriodoY">Per√≠odo (Crescimento %):</label>
                <div class="info-tooltip">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-text">Define o per√≠odo para calcular o percentual de crescimento da arrecada√ß√£o, representado no eixo vertical (Y) do gr√°fico.</span>
                </div>
              </div>
              <select id="quadrantePeriodoY">
                <option value="2022-2023">2022-2023</option>
                <option value="2023-2024" selected>2023-2024</option>
                <option value="2022-2024">2022-2024</option>
              </select>
            </div>
          </div>

          <div class="quadrantes-container">
            <div class="quadrantes-chart-container">
              <canvas id="quadrantesChart"></canvas>
            </div>
            <div class="quadrantes-controls">
              <div class="zoom-instructions">
                <div class="instruction-title">Controles de Zoom e Navega√ß√£o:</div>
                <div class="instruction-item">
                  <span class="instruction-icon">üñ±Ô∏è</span> Use a roda do mouse para aplicar zoom
                </div>
                <div class="instruction-item">
                  <span class="instruction-icon">üëÜ</span> Arraste para mover o gr√°fico
                </div>
                <div class="instruction-item">
                  <span class="instruction-icon">‚Ü∫</span> <button id="resetZoomBtn" class="zoom-btn">Resetar Zoom</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Fim da Aba Rankings e An√°lises -->
    </div>

    <!-- Carregando a biblioteca Chart.js e plugins -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/1.2.1/chartjs-plugin-zoom.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
